<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta name="google-site-verification" content="fsx8Be4-zptHyi5VX7x55azCI6uSE6JJEHaXnmK5_Is" />
<title>Story website</title>

<style>
body{margin:0;font-family:system-ui;background:#020617;color:white;}
header{padding:15px;background:#0f172a;position:sticky;top:0;border-bottom:1px solid #1e293b;}
.container{max-width:900px;margin:auto;padding:15px;}
input,textarea,select{background:#020617;color:white;border:1px solid #1e293b;padding:8px;border-radius:8px;width:100%;}
button{background:#2563eb;color:white;border:none;padding:6px 10px;border-radius:8px;margin-top:6px;cursor:pointer;}
.story{background:#020617;padding:12px;border-radius:14px;border:1px solid #1e293b;margin-top:10px;}
.adminBox{background:#020617;padding:15px;border-radius:14px;border:1px solid #22c55e;margin-bottom:15px;}
.storyButtons button{margin-right:5px;background:#f97316;}
.shortText{display:inline;}
.fullText{display:none;}
.pagination{display:flex;justify-content:space-between;margin-top:15px;}
</style>
</head>
<body>

<header><h2>üìö ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§ï‡§π‡§æ‡§®‡•Ä ‡§≤‡§æ‡§á‡§¨‡•ç‡§∞‡•á‡§∞‡•Ä</h2></header>
<div class="container">

<!-- Admin Login -->
<div id="loginBox" class="adminBox">
<h3>üîê Admin Login</h3>
<input id="adminPass" placeholder="Admin Password ‡§°‡§æ‡§≤‡•á‡§Ç">
<button onclick="login()">Login</button>
<p id="loginError" style="color:red"></p>
</div>

<!-- Admin Panel -->
<div id="adminPanel" style="display:none;" class="adminBox">
<h3>‚úçÔ∏è ‡§ï‡§π‡§æ‡§®‡•Ä ‡§ú‡•ã‡§°‡§º‡•á‡§Ç / Edit</h3>
<input id="title" placeholder="‡§ï‡§π‡§æ‡§®‡•Ä ‡§ï‡§æ ‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï">
<select id="category">
<option value="love">‡§™‡•ç‡§∞‡•á‡§Æ ‡§ï‡§π‡§æ‡§®‡•Ä</option>
<option value="horror">‡§π‡•â‡§∞‡§∞</option>
<option value="moral">‡§™‡•ç‡§∞‡•á‡§∞‡§£‡§æ‡§¶‡§æ‡§Ø‡§ï</option>
</select>
<textarea id="content" rows="4" placeholder="‡§ï‡§π‡§æ‡§®‡•Ä ‡§≤‡§ø‡§ñ‡•á‡§Ç..."></textarea>
<button onclick="addOrEditStory()">Save Story</button>
<button id="cancelEdit" style="display:none;" onclick="cancelEdit()">Cancel Edit</button>
</div>

<h3>üìñ ‡§∏‡§≠‡•Ä ‡§ï‡§π‡§æ‡§®‡§ø‡§Ø‡§æ‡§Å</h3>
<div id="storyList"></div>

<div class="pagination">
  <button onclick="prevPage()">‚¨Ö Previous</button>
  <span id="pageInfo"></span>
  <button onclick="nextPage()">Next ‚û°</button>
</div>

</div>

<script>
// üîê Admin Password
const ADMIN_PASSWORD = "admin123";
let isAdmin=false;

// Story storage
let stories = JSON.parse(localStorage.getItem("stories")) || [];
let editIndex = -1;

// Pagination
let currentPage=1;
const perPage=5;

// Admin Login
function login(){
  const pass = document.getElementById("adminPass").value;
  if(pass===ADMIN_PASSWORD){
    document.getElementById("loginBox").style.display="none";
    document.getElementById("adminPanel").style.display="block";
    isAdmin=true;
    render();
  }else{
    document.getElementById("loginError").innerText="‡§ó‡§≤‡§§ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‚ùå";
  }
}

// Add or Edit Story
function addOrEditStory(){
  const t=document.getElementById("title").value.trim();
  const c=document.getElementById("category").value;
  const txt=document.getElementById("content").value.trim();
  if(!t||!txt){alert("Title ‡§î‡§∞ ‡§ï‡§π‡§æ‡§®‡•Ä ‡§≤‡§ø‡§ñ‡•á‡§Ç");return;}
  if(editIndex>=0){
    stories[editIndex]={title:t,cat:c,text:txt};
    editIndex=-1;
    document.getElementById("cancelEdit").style.display="none";
  }else{
    stories.push({title:t,cat:c,text:txt});
  }
  document.getElementById("title").value="";
  document.getElementById("content").value="";
  save();
  currentPage = Math.ceil(stories.length/perPage); // move to last page
  render();
}

// Cancel Edit
function cancelEdit(){
  editIndex=-1;
  document.getElementById("title").value="";
  document.getElementById("content").value="";
  document.getElementById("cancelEdit").style.display="none";
}

// Delete
function deleteStory(i){
  if(!isAdmin) return;
  stories.splice(i,1);
  save();
  if((currentPage-1)*perPage >= stories.length && currentPage>1) currentPage--;
  render();
}

// Edit
function editStory(i){
  if(!isAdmin) return;
  editIndex=i;
  document.getElementById("title").value=stories[i].title;
  document.getElementById("content").value=stories[i].text;
  document.getElementById("category").value=stories[i].cat;
  document.getElementById("cancelEdit").style.display="inline-block";
}

// Toggle Read More / Less
function toggleText(btn){
  const shortText = btn.parentElement.querySelector(".shortText");
  const fullText = btn.parentElement.querySelector(".fullText");
  if(fullText.style.display==="none" || fullText.style.display===""){
    fullText.style.display="inline";
    shortText.style.display="none";
    btn.innerText="Read Less";
  }else{
    fullText.style.display="none";
    shortText.style.display="inline";
    btn.innerText="Read More";
  }
}

// Save to localStorage
function save(){localStorage.setItem("stories",JSON.stringify(stories));}

// Pagination controls
function nextPage(){if(currentPage<Math.ceil(stories.length/perPage)){currentPage++;render();}}
function prevPage(){if(currentPage>1){currentPage--;render();}}

// Render Stories with Pagination
function render(){
  if(stories.length===0){document.getElementById("storyList").innerHTML="‡§Ö‡§≠‡•Ä ‡§ï‡•ã‡§à ‡§ï‡§π‡§æ‡§®‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§"; document.getElementById("pageInfo").innerText=""; return;}
  
  const start = (currentPage-1)*perPage;
  const end = start + perPage;
  const pageStories = stories.slice(start,end);
  
  let html="";
  pageStories.forEach((s,i)=>{
    let index = start+i; // real index in stories array
    let preview = s.text.length>100 ? s.text.slice(0,100)+"..." : s.text;
    html+=`<div class="story">
      <h3>${s.title}</h3>
      <p>
        <span class="shortText">${preview}</span>
        <span class="fullText">${s.text}</span>
      </p>
      <button onclick="toggleText(this)">Read More</button>
      <br>`;
    if(isAdmin){
      html+=`<div class="storyButtons">
        <button onclick="editStory(${index})">‚úè Edit</button>
        <button onclick="deleteStory(${index})">üóë Delete</button>
      </div>`;
    }
    html+=`</div>`;
  });

  document.getElementById("storyList").innerHTML=html;
  document.getElementById("pageInfo").innerText=`Page ${currentPage} / ${Math.max(1,Math.ceil(stories.length/perPage))}`;
}

render();
</script>

</body>
</html>
